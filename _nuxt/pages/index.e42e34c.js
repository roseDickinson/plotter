(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{249:function(t,e,n){"use strict";n.r(e);n(252);var o=n(61),r={name:"Column",props:{type:{type:String,default:"column"},name:{type:String,default:""},index:{type:Number,default:0},aesthetic:{type:String,default:""}},computed:{columnProperties:function(){return o.b}},methods:{removeColumn:function(){this.$store.dispatch("removeColumn",[this.type,this.index,this.aesthetic])}}},l=n(39),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-expansion-panel",[n("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:t._u([{key:"actions",fn:function(){return[n("v-btn",{attrs:{icon:""},on:{click:t.removeColumn}},[n("v-icon",[t._v("mdi-minus")])],1),t._v(" "),n("v-icon",[t._v("$expand")])]},proxy:!0}])},[t._v("\n    "+t._s(t.name)+"\n    ")]),t._v(" "),n("v-expansion-panel-content",t._l(t.columnProperties,(function(option){return n("Option",{key:option.name,attrs:{option:option,index:t.index,aesthetic:t.aesthetic,type:t.type}})})),1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Option:n(273).default})},253:function(t,e,n){var content=n(283);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(65).default)("b2f9d028",content,!0,{sourceMap:!1})},269:function(t,e,n){"use strict";n.r(e);n(20);var o=n(111),r={name:"Geometries",components:{},data:function(){return{addGeometrySelected:null}},computed:{supportedGeometries:function(){return o.a},supportedGeometriesNames:function(){return o.a.map((function(t){return t.name}))},data:function(){return this.$store.state.geometries.geometries[this.index]},geometries:{get:function(){return this.$store.state.geometries.geometries},set:function(t){this.$store.commit("geometries/setGeometries",t)}}},methods:{addGeometry:function(t){var e=this;this.$store.commit("geometries/addGeometry",t),this.$nextTick((function(){e.addGeometrySelected=null}))},getComponentData:function(){return{attrs:{flat:!0,hover:!0}}}}},l=n(39),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"pa-1"},[n("v-card-title",[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"10"}},[t._v("\n        Geometries\n      ")]),t._v(" "),n("v-col",{attrs:{cols:"2"}},[n("v-icon",{attrs:{color:"primary"}},[t._v("mdi-shape-plus")])],1)],1)],1),t._v(" "),n("v-card-subtitle",[t._v("\n    Add layers to plot\n  ")]),t._v(" "),n("v-expansion-panels",{attrs:{flat:"",hover:""}},t._l(t.geometries,(function(t,i){return n("Geometry",{key:i,attrs:{name:t.name,index:i}})})),1),t._v(" "),n("v-overflow-btn",{attrs:{items:t.supportedGeometries,"item-value":"name",label:"Add new geometry",flat:"",filled:"","prepend-icon":"mdi-plus"},on:{input:t.addGeometry},scopedSlots:t._u([{key:"item",fn:function(e){var o=e.item,r=e.attrs,l=e.on;return[n("v-list-item",t._g(t._b({},"v-list-item",r,!1),l),[n("v-list-item-content",[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:t._s(o.icon)}})],1),t._v(" "),n("v-list-item-title",{attrs:{id:r["aria-labelledby"]},domProps:{textContent:t._s(o.name)}}),t._v(" "),n("v-list-item-subtitle",{domProps:{textContent:t._s(o.text)}})],1)],1)]}}]),model:{value:t.addGeometrySelected,callback:function(e){t.addGeometrySelected=e},expression:"addGeometrySelected"}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Geometry:n(320).default})},270:function(t,e,n){"use strict";n.r(e);var o={name:"Spec",data:function(){return{}},computed:{vegaSpecString:function(){return JSON.stringify(this.vegaSpec,null,2)},vegaSpec:function(){return this.$store.getters.vegaSpec}}},r=n(39),component=Object(r.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-card",{staticClass:"pa-1"},[e("v-card-title",[e("v-row",{attrs:{"no-gutters":""}},[e("v-col",{attrs:{cols:"10"}},[this._v("\n        Vega-Lite Specification\n      ")]),this._v(" "),e("v-col",{attrs:{cols:"2"}},[e("v-icon",{attrs:{color:"primary"}},[this._v("mdi-code-json")])],1)],1)],1),this._v(" "),e("pre",[this._v("  "+this._s(this.vegaSpecString)+"\n")])],1)}),[],!1,null,null,null);e.default=component.exports},271:function(t,e,n){"use strict";n.r(e);n(20);var o=n(263),r=n.n(o),l=n(249),c={name:"Columns",components:{draggable:r.a,Column:l.default},data:function(){return{calculateExpression:null,addColumnSelected:null}},computed:{columnsInDataFile:function(){return this.$store.state.dataset.columnsInDataFile.map((function(t){return t.name}))},columns:{get:function(){return this.$store.state.dataset.columns},set:function(t){this.$store.commit("dataset/setColumns",t)}},filterExpression:{get:function(){return this.$store.state.dataset.filter},set:function(t){this.$store.commit("dataset/setFilter",t)}}},methods:{getComponentData:function(){return{attrs:{flat:!0,hover:!0}}},addColumn:function(t){var e=this;this.$store.commit("dataset/addColumn",t),this.$nextTick((function(){e.addColumnSelected=null}))},addCalculateField:function(t){var e=this;this.$store.commit("dataset/addCalculateField",this.calculateExpression),this.$nextTick((function(){e.calculateExpression=null}))}}},d=(n(282),n(39)),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"pa-1"},[n("v-card-title",[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"10"}},[t._v("\n        Columns\n      ")]),t._v(" "),n("v-col",{attrs:{cols:"2"}},[n("v-icon",{attrs:{color:"primary"}},[t._v("mdi-table")])],1)],1)],1),t._v(" "),n("v-card-subtitle",[t._v("Drag columns to an aesthetic")]),t._v(" "),n("v-expansion-panels"),t._v(" "),n("draggable",{attrs:{group:{name:"aesthetics",pull:"clone",put:!0},sort:!1,tag:"v-expansion-panels","component-data":t.getComponentData()},model:{value:t.columns,callback:function(e){t.columns=e},expression:"columns"}},t._l(t.columns,(function(t,i){return n("Column",{key:t.name,attrs:{name:t.name,index:i,type:"column"}})})),1),t._v(" "),n("v-overflow-btn",{attrs:{items:t.columnsInDataFile,label:"Add new field",flat:"",filled:"","prepend-icon":"mdi-plus"},on:{input:t.addColumn},model:{value:t.addColumnSelected,callback:function(e){t.addColumnSelected=e},expression:"addColumnSelected"}}),t._v(" "),n("v-text-field",{attrs:{label:"Calculate new field","prepend-icon":"mdi-plus",hint:'for example: "2*datum.fieldName" <a\n    href="https://vega.github.io/vega/docs/expressions">(syntax}</a>',filled:""},on:{"click:prepend":t.addCalculateField},scopedSlots:t._u([{key:"message",fn:function(e){var o=e.message;return[n("span",{domProps:{innerHTML:t._s(o)}})]}}]),model:{value:t.calculateExpression,callback:function(e){t.calculateExpression=e},expression:"calculateExpression"}}),t._v(" "),n("v-text-field",{attrs:{label:"Filter data",hint:'for example: "datum.fieldName > 60" <a\n    href="https://vega.github.io/vega/docs/expressions">(syntax}</a>',filled:"","persistent-hint":""},scopedSlots:t._u([{key:"message",fn:function(e){var o=e.message;return[n("span",{domProps:{innerHTML:t._s(o)}})]}}]),model:{value:t.filterExpression,callback:function(e){t.filterExpression=e},expression:"filterExpression"}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Column:n(249).default})},272:function(t,e,n){"use strict";n.r(e);var o={name:"PlotView",data:function(){return{vegaEmbedRef:{}}},mounted:function(){this.vegaEmbedRef=this.$refs.vegaEmbed},computed:{vegaSpecString:function(){return JSON.stringify(this.vegaSpec,null,2)},vegaSpec:function(){return this.$store.dispatch("uploadState"),this.$store.getters.vegaSpec}}},r=n(39),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"pa-1"},[n("v-card-title",[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"2"}},[t._v("\n        Plot\n      ")]),t._v(" "),n("v-col",{attrs:{cols:"3"}},[n("SavePlot",{attrs:{vegaEmbedRef:t.vegaEmbedRef}})],1),t._v(" "),n("v-col",{attrs:{cols:"3"}},[n("SaveTemplate")],1),t._v(" "),n("v-col",{attrs:{cols:"2"}}),t._v(" "),n("v-col",{attrs:{cols:"2"}},[n("v-icon",{attrs:{color:"primary"}},[t._v("mdi-chart-line")])],1)],1)],1),t._v(" "),n("VegaEmbed",{ref:"vegaEmbed",attrs:{spec:t.vegaSpec}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{SavePlot:n(318).default,SaveTemplate:n(317).default,VegaEmbed:n(319).default})},273:function(t,e,n){"use strict";n.r(e);n(20),n(252);var o=n(61),r={name:"Column",props:{option:{type:Object,default:function(){return o.b[0]}},type:{type:String,default:"column"},index:{type:Number,default:0},aesthetic:{type:String,default:""}},data:function(){return{}},computed:{show:function(){return"column"!==this.type||this.option.showInColumns},optionValue:{get:function(){var t={index:this.index,aesthetic:this.aesthetic};return this.$store.getters.option(this.type,this.option.name,t)},set:function(t){var e={index:this.index,aesthetic:this.aesthetic};this.$store.dispatch("setOption",[this.type,this.option.name,e,t])}}}},l=n(39),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",["select"===t.option.type&&t.show?n("v-select",{attrs:{items:Object.keys(t.option.options),label:t.option.name,clearable:t.option.optional,hint:t.option.hint},scopedSlots:t._u([{key:"item",fn:function(e){var o=e.item,r=e.attrs,l=e.on;return[n("v-list-item",t._g(t._b({},"v-list-item",r,!1),l),[n("v-list-item-content",[n("v-list-item-title",{attrs:{id:r["aria-labelledby"]},domProps:{textContent:t._s(o)}}),t._v(" "),n("v-list-item-subtitle",{domProps:{textContent:t._s(t.option.options[o])}})],1)],1)]}}],null,!1,2634334136),model:{value:t.optionValue,callback:function(e){t.optionValue=e},expression:"optionValue"}}):t._e(),t._v(" "),"textBox"===t.option.type&&t.show?n("v-text-field",{attrs:{label:t.option.name,clearable:t.option.optional,hint:t.option.hint},model:{value:t.optionValue,callback:function(e){t.optionValue=e},expression:"optionValue"}}):t._e(),t._v(" "),"textBoxNumber"===t.option.type&&t.show?n("v-text-field",{attrs:{label:t.option.name,type:"number",clearable:t.option.optional,hint:t.option.hint},model:{value:t.optionValue,callback:function(e){t.optionValue=e},expression:"optionValue"}}):t._e(),t._v(" "),"checkBox"===t.option.type&&t.show?n("v-checkbox",{attrs:{label:t.option.name,hint:t.option.hint,"persistent-hint":""},model:{value:t.optionValue,callback:function(e){t.optionValue=e},expression:"optionValue"}}):t._e()],1)}),[],!1,null,null,null);e.default=component.exports},274:function(t,e,n){"use strict";n.r(e);n(20);var o=n(263),r=n.n(o),l=n(249),c=n(61),d={name:"Aesthetic",components:{draggable:r.a,Column:l.default},props:{name:{type:String,default:"x"}},data:function(){return{}},computed:{aesthetics:function(){return c.a},aesthetic:function(){var t=this;return c.a.filter((function(e){return e.name===t.name}))[0]},aesMap:{get:function(){return this.$store.getters["geometries/geometry"].aesthetics[this.name]},set:function(t){this.$store.commit("geometries/updateAesthetics",[this.name,t])}}},methods:{getComponentData:function(){return{attrs:{flat:!0,hover:!0}}}}},v=n(39),component=Object(v.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",{attrs:{align:"center","no-gutters":""}},[n("v-col",{attrs:{cols:"3"}},[n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[n("span",t._g(t._b({},"span",r,!1),o),[n("v-icon",{domProps:{textContent:t._s(t.aesthetic.icon)}}),t._v("\n          "+t._s(t.name)+"\n        ")],1)]}}])},[t._v(" "),n("span",[t._v(t._s(t.aesthetic.text))])])],1),t._v(" "),n("v-col",{attrs:{cols:"9"}},[n("draggable",{attrs:{group:{name:"aesthetics",put:!0},sort:!0,tag:"v-expansion-panels","component-data":t.getComponentData()},model:{value:t.aesMap,callback:function(e){t.aesMap=e},expression:"aesMap"}},[t._l(t.aesMap,(function(e,i){return n("Column",{key:e.name,attrs:{name:e.name,index:i,aesthetic:t.name,type:"aesthetic"}})})),t._v(" "),0==t.aesMap.length?n("v-card-text",{staticClass:"c-grey",attrs:{slot:"footer"},slot:"footer"},[t._v("\n        Add\n      ")]):t._e()],2)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Column:n(249).default})},275:function(t,e,n){"use strict";n.r(e);n(13),n(9),n(31);var o=n(274),r=n(61),l={name:"Dataset",components:{Aesthetic:o.default},data:function(){return{addAestheticSelected:null}},computed:{currentAesthetics:function(){var t=this.$store.getters["geometries/geometry"];return Object.keys(t.aesthetics)},aesthetics:function(){return r.a}},methods:{addAesthetic:function(t){var e=this;this.$store.commit("geometries/addAesthetic",t),this.$nextTick((function(){e.addAestheticSelected=null}))}}},c=n(39),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"pa-1 bg-grey"},[n("v-card-title",[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"10"}},[t._v("\n        Aesthetics\n      ")]),t._v(" "),n("v-col",{attrs:{cols:"2"}},[n("v-icon",{attrs:{color:"primary"}},[t._v("mdi-image-filter-vintage")])],1)],1)],1),t._v(" "),n("v-card-subtitle",[t._v("Map columns to visual properies")]),t._v(" "),n("v-list",{staticClass:"bg-grey"},t._l(t.currentAesthetics,(function(t){return n("Aesthetic",{key:t,attrs:{name:t}})})),1),t._v(" "),n("v-overflow-btn",{attrs:{items:t.aesthetics,"item-value":"name",label:"Add new aesthetic",flat:"",filled:"","prepend-icon":"mdi-plus"},on:{input:t.addAesthetic},scopedSlots:t._u([{key:"item",fn:function(e){var o=e.item,r=e.attrs,l=e.on;return[n("v-list-item",t._g(t._b({},"v-list-item",r,!1),l),[n("v-list-item-content",[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:t._s(o.icon)}})],1),t._v(" "),n("v-list-item-title",{attrs:{id:r["aria-labelledby"]},domProps:{textContent:t._s(o.name)}}),t._v(" "),n("v-list-item-subtitle",{domProps:{textContent:t._s(o.text)}})],1)],1)]}}]),model:{value:t.addAestheticSelected,callback:function(e){t.addAestheticSelected=e},expression:"addAestheticSelected"}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Aesthetic:n(274).default})},282:function(t,e,n){"use strict";var o=n(253);n.n(o).a},283:function(t,e,n){(e=n(64)(!1)).push([t.i,".list-group{min-height:20px}.list-group-item{cursor:move}.footer-item{opacity:1%}",""]),t.exports=e},316:function(t,e,n){"use strict";n.r(e);n(42),n(21);var o=n(19),r=(n(20),n(13),n(9),n(31),n(15)),l=n(3),c=n.n(l),d=n(314),v=n.n(d),m={count:"The total count of data objects in the group. Note: ‘count’ operates directly on the input objects and return the same value regardless of the provided field.",valid:"The count of field values that are not null, undefined or NaN.",values:"A list of data objects in the group. missing\tThe count of null or undefined field values.",distinct:"The count of distinct field values.",sum:"The sum of field values.",product:"The product of field values.",mean:"The mean (average) field value.",average:"The mean (average) field value. Identical to mean.",variance:"The sample variance of field values.",variancep:"The population variance of field values.",stdev:"The sample standard deviation of field values.",stdevp:"The population standard deviation of field values.",stderr:"The standard error of field values.",median:"The median field value.",q1:"The lower quartile boundary of field values.",q3:"The upper quartile boundary of field values.",ci0:"The lower boundary of the bootstrapped 95% confidence interval of the mean field value.",ci1:"The upper boundary of the bootstrapped 95% confidence interval of the mean field value.",min:"The minimum field value.",max:"The maximum field value.",argmin:"An input data object containing the minimum field value. Note: When used inside encoding, argmin must be specified as an object.",argmax:"An input data object containing the maximum field value. Note: When used inside encoding, argmax must be specified as an object."};function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var _={name:"Data",components:{},data:function(){return{}},computed:{csvError:function(){return this.$store.state.dataset.csvError},topojsonError:function(){return this.$store.state.dataset.topojsonError},geojsonError:function(){return this.$store.state.dataset.geojsonError},syncError:function(){return this.$store.state.syncError},csvFiles:function(){return this.$store.state.dataset.csvFiles.map((function(t,i){return h(h({},t),{},{index:i})}))},availableAggregates:function(){return Object.keys(m)},preLookupAgregate:{get:function(){return this.$store.state.dataset.preLookupAgregate},set:function(t){this.$store.commit("dataset/setPrelookupAgregate",t)}},topojsonFiles:function(){return this.$store.state.dataset.topojsonFiles.map((function(t,i){return h(h({},t),{},{index:i})}))},geojsonFiles:function(){return this.$store.state.dataset.geojsonFiles.map((function(t,i){return h(h({},t),{},{index:i})}))},loadCsvProgress:function(){return this.$store.state.dataset.loadCsvProgress},loadGeoProgress:function(){return this.$store.state.dataset.loadGeoProgress},availableModes:function(){return["csv","topojson","geojson","csv + topojson","csv + geojson"]},mode:{get:function(){return this.$store.state.dataset.mode},set:function(t){var e=this;this.$store.commit("dataset/setMode",t),this.$store.commit("dataset/setCsvIndex",0),this.$store.commit("dataset/setGeoIndex",0),"csv + topojson"===t?(this.$store.dispatch("dataset/loadCsvData").then((function(){e.$store.commit("dataset/addGeoField")})),this.$store.dispatch("dataset/loadTopojsonData")):"csv + geojson"===t?(this.$store.dispatch("dataset/loadCsvData").then((function(){e.$store.commit("dataset/addGeoField")})),this.$store.dispatch("dataset/loadGeojsonData")):"topojson"===t?this.$store.dispatch("dataset/loadTopojsonData"):"geojson"===t?this.$store.dispatch("dataset/loadGeojsonData"):this.$store.dispatch("dataset/loadCsvData"),this.$store.commit("geometries/setDefaultGeometries",t)}},csvIndex:{get:function(){return this.$store.state.dataset.csvIndex},set:function(t){var e=this;this.$store.commit("dataset/setCsvIndex",t),this.$store.commit("dataset/setCsvId",""),this.$store.dispatch("dataset/loadCsvData").then((function(){"csv + topojson"===e.mode&&e.$store.commit("dataset/addGeoField")}))}},topojsonIndex:{get:function(){return this.$store.state.dataset.geoIndex},set:function(t){this.$store.commit("dataset/setGeoIndex",t),this.$store.commit("dataset/setGeoId",""),this.$store.dispatch("dataset/loadTopojsonData")}},geojsonIndex:{get:function(){return this.$store.state.dataset.geoIndex},set:function(t){this.$store.commit("dataset/setGeoIndex",t),this.$store.commit("dataset/setGeoId",""),this.$store.dispatch("dataset/loadGeojsonData")}},geoProperties:function(){return this.$store.state.dataset.geoProperties},csvProperties:function(){return this.$store.state.dataset.columnsInDataFile.map((function(t){return t.name}))},csvId:{get:function(){return this.$store.state.dataset.csvId},set:function(t){this.$store.commit("dataset/setCsvId",t);var e=this.$store.state.dataset.columnsInDataFile.filter((function(e){return e.name===t}))[0];this.$store.commit("geometries/addAesthetic","detail"),this.$store.commit("geometries/updateAesthetics",["detail",[e]])}},geoId:{get:function(){return this.$store.state.dataset.geoId},set:function(t){this.$store.commit("dataset/setGeoId",t)}}},methods:{downloadFile:function(t){var e="";"csv"===t?e=this.csvFiles[this.csvIndex].url:"topojson"===t?e=this.topojsonFiles[this.topojsonIndex].url:"geojson"===t&&(e=this.geojsonFiles[this.geojsonIndex].url);var n=e.substring(e.lastIndexOf("/")+1);c.a.get(e,{}).then((function(t){"object"===Object(o.a)(t.data)&&null!==t.data?v()(JSON.stringify(t.data,null,2),n):v()(t.data,n)}))}}},x=n(39),component=Object(x.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"2"}},[n("v-select",{attrs:{items:t.availableModes,label:"what is your input data?",hint:"selection will reset geometry data"},model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}})],1),t._v(" "),n("v-col",{attrs:{cols:"3"}},["csv"==t.mode||"csv + topojson"==t.mode||"csv + geojson"==t.mode?n("v-select",{attrs:{items:t.csvFiles,"item-text":"filename","item-value":"index",label:"csv file"},scopedSlots:t._u([{key:"append-outer",fn:function(){return[n("v-btn",{attrs:{icon:"",color:"primary"},on:{click:function(e){return t.downloadFile("csv")}}},[n("v-icon",[t._v("mdi-download")])],1)]},proxy:!0}],null,!1,3540021831),model:{value:t.csvIndex,callback:function(e){t.csvIndex=e},expression:"csvIndex"}}):t._e(),t._v(" "),"topojson"==t.mode?n("v-select",{attrs:{items:t.topojsonFiles,"item-text":"filename","item-value":"index",label:"topojson file"},scopedSlots:t._u([{key:"append-outer",fn:function(){return[n("v-btn",{attrs:{icon:"",color:"primary"},on:{click:function(e){return t.downloadFile("topojson")}}},[n("v-icon",[t._v("mdi-download")])],1)]},proxy:!0}],null,!1,4281064221),model:{value:t.topojsonIndex,callback:function(e){t.topojsonIndex=e},expression:"topojsonIndex"}}):t._e(),t._v(" "),"geojson"==t.mode?n("v-select",{attrs:{items:t.geojsonFiles,"item-text":"filename","item-value":"index",label:"geojson file"},scopedSlots:t._u([{key:"append-outer",fn:function(){return[n("v-btn",{attrs:{icon:"",color:"primary"},on:{click:function(e){return t.downloadFile("geojson")}}},[n("v-icon",[t._v("mdi-download")])],1)]},proxy:!0}],null,!1,541201204),model:{value:t.geojsonIndex,callback:function(e){t.geojsonIndex=e},expression:"geojsonIndex"}}):t._e()],1),t._v(" "),n("v-col",["csv + topojson"==t.mode||"csv + geojson"==t.mode?n("v-select",{attrs:{items:t.csvProperties,label:"csv id field"},model:{value:t.csvId,callback:function(e){t.csvId=e},expression:"csvId"}}):t._e()],1),t._v(" "),n("v-col",{attrs:{cols:"3"}},["csv + topojson"==t.mode?n("v-select",{attrs:{items:t.topojsonFiles,"item-text":"filename","item-value":"index",label:"topojson file"},scopedSlots:t._u([{key:"append-outer",fn:function(){return[n("v-btn",{attrs:{icon:"",color:"primary"},on:{click:function(e){return t.downloadFile("topojson")}}},[n("v-icon",[t._v("mdi-download")])],1)]},proxy:!0}],null,!1,4281064221),model:{value:t.topojsonIndex,callback:function(e){t.topojsonIndex=e},expression:"topojsonIndex"}}):t._e(),t._v(" "),"csv + geojson"==t.mode?n("v-select",{attrs:{items:t.geojsonFiles,"item-text":"filename","item-value":"index",label:"geojson file"},scopedSlots:t._u([{key:"append-outer",fn:function(){return[n("v-btn",{attrs:{icon:"",color:"primary"},on:{click:function(e){return t.downloadFile("geojson")}}},[n("v-icon",[t._v("mdi-download")])],1)]},proxy:!0}],null,!1,541201204),model:{value:t.geojsonIndex,callback:function(e){t.geojsonIndex=e},expression:"geojsonIndex"}}):t._e()],1),t._v(" "),n("v-col",["csv + topojson"==t.mode||"csv + geojson"==t.mode?n("v-select",{attrs:{items:t.geoProperties,label:"geometry id field"},model:{value:t.geoId,callback:function(e){t.geoId=e},expression:"geoId"}}):t._e()],1)],1),t._v(" "),n("v-row",{attrs:{dense:""}},[t.csvError?n("v-col",[n("v-alert",{attrs:{type:"error",dense:""}},[t._v("\n        "+t._s(t.csvError)+"\n      ")])],1):t._e(),t._v(" "),t.topojsonError?n("v-col",[n("v-alert",{attrs:{type:"error",dense:""}},[t._v("\n        "+t._s(t.topojsonError)+"\n      ")])],1):t._e(),t._v(" "),t.geojsonError?n("v-col",[n("v-alert",{attrs:{type:"error",dense:""}},[t._v("\n        "+t._s(t.geojsonError)+"\n      ")])],1):t._e(),t._v(" "),t.syncError?n("v-col",[n("v-alert",{attrs:{type:"error",dense:""}},[t._v("\n        "+t._s(t.syncError)+"\n      ")])],1):t._e()],1)],1)}),[],!1,null,null,null);e.default=component.exports},317:function(t,e,n){"use strict";n.r(e);var o=n(46),r={name:"SaveTemplate",data:function(){return{dialog:!1,title:null,description:null,filename:"template.json"}},methods:{save:function(t){var e=this.$store.state;console.log("uploading current state",e),Object(o.f)(this.title,this.description,this.filename,e).then((function(t){console.log("Successfully uploaded template",t)})).catch((function(t){console.log("ERROR uploading template",t)})),this.dialog=!1},cancel:function(t){this.dialog=!1}}},l=n(39),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[n("v-btn",t._g(t._b({attrs:{color:"red lighten-2",dark:""}},"v-btn",r,!1),o),[t._v("\n      Save Template\n    ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2"},[t._v("\n      Save Template\n    ")]),t._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:"Title"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),n("v-text-field",{attrs:{label:"Description"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),t._v(" "),n("v-text-field",{attrs:{label:"Filename"},model:{value:t.filename,callback:function(e){t.filename=e},expression:"filename"}})],1),t._v(" "),n("v-divider"),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"primary",text:""},on:{click:t.save}},[t._v("\n        Save\n      ")]),t._v(" "),n("v-btn",{attrs:{color:"primary",text:""},on:{click:t.cancel}},[t._v("\n        Cancel\n      ")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},318:function(t,e,n){"use strict";n.r(e);var o={name:"SavePlot",props:{vegaEmbedRef:{type:Object,default:function(){}}},data:function(){return{dialog:!1,title:null,description:null,filename:"plot.png"}},methods:{save:function(t){this.vegaEmbedRef.uploadPlot(this.title,this.description,this.filename),this.dialog=!1},cancel:function(t){this.dialog=!1}}},r=n(39),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[n("v-btn",t._g(t._b({attrs:{color:"red lighten-2",dark:""}},"v-btn",r,!1),o),[t._v("\n      Save Plot\n    ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2"},[t._v("\n      Save Plot\n    ")]),t._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:"Title"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),n("v-text-field",{attrs:{label:"Description"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),t._v(" "),n("v-text-field",{attrs:{label:"Filename"},model:{value:t.filename,callback:function(e){t.filename=e},expression:"filename"}})],1),t._v(" "),n("v-divider"),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"primary",text:""},on:{click:t.save}},[t._v("\n        Save\n      ")]),t._v(" "),n("v-btn",{attrs:{color:"primary",text:""},on:{click:t.cancel}},[t._v("\n        Cancel\n      ")])],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},319:function(t,e,n){"use strict";n.r(e);n(25);var o=n(2),r=n(315),l=n(3),c=n.n(l),d=n(46),v={props:{spec:{type:Object,default:function(){return{}}}},data:function(){return{width:0}},watch:{spec:function(t){t&&this.draw()}},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.addEventListener("resize",t.handleResize),e.next=3,t.handleResize();case 3:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize)},methods:{handleResize:function(t){this.width=this.$refs.box.clientWidth,this.draw()},draw:function(){return this.spec.width=.7*this.width,this.spec.height=.55*this.width,Object(r.a)("#viz",this.spec,{actions:!1}).then((function(t){t.finalize()}))},uploadPlot:function(title,t,e){this.view.toImageURL("png").then((function(t){return c.a.get(t,{responseType:"blob"})})).then((function(n){return Object(d.d)(title,t,e,n.data)})).then((function(t){console.log("Successfully uploaded plot",t)})).catch((function(t){console.log("ERROR uploading image",t)}))}}},m=n(39),component=Object(m.a)(v,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"box"},[e("div",{attrs:{id:"viz"}})])}),[],!1,null,null,null);e.default=component.exports},320:function(t,e,n){"use strict";n.r(e);n(20),n(252);var o=n(111),r={name:"Geometry",props:{index:{type:Number,default:0}},data:function(){return{}},computed:{geometry:function(){var t=this;return o.a.filter((function(e){return e.name===t.data.type}))[0]},supportedGeometries:function(){return o.a.map((function(t){return t.name}))},headerClass:function(){return this.index===this.selectedIndex?"bg-grey":null},selectedIndex:function(){return this.$store.state.geometries.selectedGeometry},data:function(){return this.$store.state.geometries.geometries[this.index]},type:function(){return this.data.type}},methods:{selectGeometry:function(){this.$store.commit("geometries/setSelectedGeometry",this.index),this.$store.commit("geometries/setHighlightAesthetics",!0)},removeGeometry:function(){this.$store.dispatch("geometries/removeGeometry",this.index)}}},l=n(39),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-expansion-panel",{attrs:{"prepend-icon":"mdi-chart-scatter-plot"},on:{click:t.selectGeometry}},[n("v-expansion-panel-header",{class:t.headerClass,attrs:{"disable-icon-rotate":""},scopedSlots:t._u([{key:"actions",fn:function(){return[t.index==t.selectedIndex?n("v-icon",{attrs:{color:"accent"}},[t._v("mdi-image-filter-vintage")]):t._e(),t._v(" "),n("v-btn",{attrs:{icon:""},on:{click:t.removeGeometry}},[n("v-icon",[t._v("mdi-minus")])],1),t._v(" "),n("v-icon",[t._v("$expand")])]},proxy:!0}])},[n("span",[n("v-icon",{domProps:{textContent:t._s(t.geometry.icon)}}),t._v("\n      "+t._s(t.geometry.name)+"\n    ")],1)]),t._v(" "),n("v-expansion-panel-content",[t._l(t.geometry.options,(function(option){return n("Option",{key:option.name,attrs:{option:option,index:t.index,type:"geometry"}})})),t._v(" "),0==t.geometry.options?n("v-card-text",[t._v("\n      No options\n    ")]):t._e()],2)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Option:n(273).default})},328:function(t,e,n){"use strict";n.r(e);var o=n(271),r=n(275),l=n(269),c=n(272),d=n(270),v=n(57),m={name:"Homepage",components:{Aesthetics:r.default,Columns:o.default,Geometries:l.default,PlotView:c.default,Spec:d.default},computed:{url:{get:function(){return this.$store.state.dataset.url},set:function(t){this.$store.commit("dataset/setUrl",t),this.$store.dispatch("dataset/loadData")}}},created:function(){this.$store.dispatch("loadStore"),this.$route.query.instanceId?(Object(v.d)(this.$route.query.instanceId),console.log("set instanceId via url query to",Object(v.b)())):Object(v.c)().then((function(){console.log("using default instanceId of",Object(v.b)())}))}},f=n(39),component=Object(f.a)(m,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-container",{attrs:{fluid:""}},[e("v-row",{attrs:{"no-gutters":""}},[e("v-col",{attrs:{cols:"12"}},[e("Data")],1)],1),this._v(" "),e("v-row",{staticClass:"mt-0 pt-0"},[e("v-col",{staticClass:"ma-0 pa-0",attrs:{cols:"2"}},[e("Geometries")],1),this._v(" "),e("v-col",{staticClass:"mt-0 pt-0",attrs:{cols:"3"}},[e("Aesthetics")],1),this._v(" "),e("v-col",{staticClass:"mt-0 pt-0",attrs:{cols:"2"}},[e("Columns")],1),this._v(" "),e("v-col",{staticClass:"mt-0 pt-0",attrs:{cols:"5"}},[e("v-row",[e("v-col",{staticClass:"mt-0 pt-0"},[e("PlotView")],1)],1),this._v(" "),e("v-row",[e("v-col",[e("Spec")],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Data:n(316).default,Geometries:n(269).default,Aesthetics:n(275).default,Columns:n(271).default,PlotView:n(272).default,Spec:n(270).default})}}]);